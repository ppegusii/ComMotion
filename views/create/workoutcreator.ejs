<!DOCTYPE html>
<html>

<head>
<meta charset=”utf-8”> 

<title><%= title %></title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel = "stylesheet" type ="text/css" href = "../stylesheets/bootstrap/css/bootstrap.css" >

<script src="../javascripts/jquery-1.11.0.min.js"></script>


<link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
<!--<script src="//code.jquery.com/jquery-1.9.1.js"></script> -->
<script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script> 
<script src="../javascripts/workoutcreator.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css">

<style>
/* IE has layout issues when sorting (see #5413) */
.group { zoom: 1 }
ul
{
list-style-type: none;
}
</style>

<script>
	$(function() {

		$( "#accordion1" )
			.accordion({
			header: "> div > h3",
			collapsible: false,
			heightStyle: "content"
			})

		$( "#accordion2" )
			.accordion({
			header: "> div > h3",
			collapsible: true,
			heightStyle: "content"
			})
	
			.sortable({
			axis: "x, y",
			handle: "h3",
			stop: function( event, ui ) {
			// IE doesn't register the blur when sorting
			// so trigger focusout handlers to remove .ui-state-focus
			//if(!(ui.item.hasClass("element"))){
			if(ui.item.hasClass("draggableExercise")){
				ui.item.children( "h3" ).triggerHandler( "focusout" );
				ui.item.replaceWith('<div class="group element"><h3><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span>' + ui.item.text() + '</h3><ul><li>Add Set</li></ul></div>');
				$(".element > h3").addClass('ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons');
				$(".element > ul").addClass('ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom');
				$(".element").accordion({collapsible: true});
				$(".group > ul").sortable();
				//$(".element").accordion({heightStyle: "content"});
			}
			if(ui.item.hasClass("draggableRest")){
				//ui.item.children( "h3" ).triggerHandler( "focusout" );
				ui.item.replaceWith('<div class="group restElement"><h3><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span>' + ui.item.text() + '</h3><ul><li>Add Set</li></ul></div>');
				$(".restElement > h3").addClass('ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons');
				//$(".restElement > ul").addClass('ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom');
				$(".restElement").accordion({collapsible: true});
			//$(".restElement").accordion( "option", "active", false);
				//$(".group > ul").sortable();
				//$(".element").accordion({heightStyle: "content"});
			}	

			//}
				
			}
		});

	});

$(function() {

$("#trash").droppable({
//accept: '.group > ul',
//hoverClass: 'dropAreaHover',
drop: function(event, ui){
$(ui.draggable).remove();

}

});

$(".group > ul").sortable();
$( "#sortable" ).sortable({
revert: true
});
$( ".draggableExercise" ).draggable({
connectToSortable: "#accordion2",
helper: "clone",
revert: false
});
$( ".draggableRest" ).draggable({
connectToSortable: "#accordion2",
helper: "clone",
revert: false
});
$( ".draggableSetBuilder" ).draggable({
connectToSortable: ".group > ul",
helper: "clone",
revert: false
});

$( ".element" ).draggable({
connectToSortable: "#trash",
revert: false
});

});

</script>


</head>

<body>

		<% include ../fragments/header %>
		

	<div class="container">

<center><h3>Create a new workout</h3></center>

		<div class="row">

	<div class="col-md-3 col-sm-3 col-xs-3">

	<div id="accordion1">
		<div class="group">
			<h3>Group/Circuit</h3>
			<div>
				<ul>
					<li>Fill In</li>
					<li>Fill In</li>
					<li>Fill In</li>
				</ul>
			</div>
		</div>
		<div class="group">
			<h3>Set Builders</h3>
			<div>
				<ul>
					<li class="draggableSetBuilder">Set Builder 1</li>
					<li class="draggableSetBuilder">Set Builder 2</li>
					<li class="draggableSetBuilder">Set Builder 3</li>
				</ul>
			</div>
		</div>
				<div class="group">
					<h3>Search for Exercise</h3>
					<div>
						<h4>Search Bar</h4>
					<ul>
						<li class="draggableExercise">Exercise x</li>
						<li class="draggableExercise">Exercise y</li>
						<li class="draggableExercise">Exercise z</li>
					</ul>
					</div>
				</div>
				<div class="group">
					<h3>Rest Period</h3>
					<div>
						<ul>
							<li class="draggableRest">Rest 30 seconds</li>
							<li class="draggableRest">Rest 1 minutes</li>
							<li class="draggableRest">Rest 5 minutes</li>
						</ul>
					</div>
				</div>
			</div>
	</div>
	<div class="col-md-1 col-sm-1 col-xs-1">
	</div>
	<div class="col-md-5 col-sm-5 col-xs-5" style="margin-top:15px; height:200px">	

	<p>Drag exercises over here to build workout</p>

	<div id="accordion2">

		<div id ="test2" class="group">
			<h3>Increasing 3 - Clean and Press</h3>
			
				<ul>
					<li>10 Reps 70% 1 Rep Max=70lb</li>
					<li>8 Reps 80% 1 Rep Max=80lb</li>
					<li>6 Reps 90% 1 Rep Max=90lb</li>
				</ul>
				
				</div>

			</div>
		</div>

		<div id="trash" class="col-md-offset-1 col-sm-offset-1 col-xs-offset-1 col-md-2 col-sm-2 col-xs-2 well" style="height:100px">

			<center>Trash Area</center>

		</div>

	</div>

</div>

<% include ../fragments/footer %>

<script src = "../javascripts/bootstrap.js"></script>


</body>


</html>
